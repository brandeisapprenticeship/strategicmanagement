
<p id="notice"><%= notice %></p>

<h1>Assignments List</h1>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Title</th>
      <th>Due Date</th>
      <%if !current_user.admin?%>
        <th>My Response</th>
      <%end%>
        <th>Class Responses</th>
      <%if current_user.admin?%>
        <th>Admin Links</th>
      <%end%>
    </tr>
  </thead>

  <tbody>
    <% @assignments.each do |assignment| %>
      <tr>
        <td style="font-family: TimesNewRoman, 'Times New Roman', Times, Baskerville, Georgia, serif;"><%= assignment.discussion_title %></td>
        <td style="font-family: TimesNewRoman, 'Times New Roman', Times, Baskerville, Georgia, serif;"><%= assignment.due_date.strftime("%-b %-d at %I:%M%p") %></td>
        <%if !current_user.admin?%>
        <% if assignment.due_date < Time.zone.now %>
        <td style="font-family: TimesNewRoman, 'Times New Roman', Times, Baskerville, Georgia, serif;">Due date has passed</td>
          <%elsif Response.where(user_id: current_user.id, assignment_id: assignment.id).exists?%>
            <%@response = Response.where(user_id: current_user.id, assignment_id: assignment.id).first%>
            <td><%=link_to "Edit/Continue Assignment", {:controller => 'responses', :action => 'edit', :id => @response.id, :assignment_id => assignment.id}%></td>
          <%else%>
            <td><%= link_to "Start Assignment", {:controller => 'responses', :action => 'new', :assignment_id => assignment.id}%></td>
          <%end%>
        <%end%>
        
        <%if current_user.admin?%>
          <td><%= link_to 'Edit', edit_assignment_path(assignment.id) %></td>
        <%end%>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<% if current_user.admin?%>
  <%= link_to 'Create New Assignment', new_assignment_path %>
<%end%>